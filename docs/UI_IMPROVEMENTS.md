# UI 개선 완료 ✅

## 🎨 주요 개선 사항

### 1. 로딩 UI 추가
- ✅ 타이핑 인디케이터 (점 3개 애니메이션)
- ✅ 메시지 전송 시 자동으로 표시
- ✅ 응답 완료 시 자동으로 숨김

### 2. 버튼 크기 최적화
- ✅ QuickReplies: 작고 컴팩트하게 (`py-2.5`, `text-sm`)
- ✅ 액션 버튼: 중간 크기로 조정 (`py-3.5`, `text-base`)
- ✅ 초기 화면에만 액션 버튼 표시 (메시지 2개 이상 시 숨김)

### 3. 자동 스크롤
- ✅ 새 메시지 추가 시 자동으로 하단 스크롤
- ✅ 로딩 인디케이터 표시 시에도 스크롤
- ✅ 키보드 오픈 시에도 스크롤 유지

### 4. 키보드 대응
- ✅ KeyboardAvoidingView로 키보드와 겹치지 않게
- ✅ iOS/Android 플랫폼별 최적화

### 5. UI 동기화
```typescript
// 메시지 추가 → 자동 스크롤
useEffect(() => {
  if (messages.length > 0) {
    setTimeout(() => {
      flatListRef.current?.scrollToEnd({ animated: true });
    }, 100);
  }
}, [messages.length]);

// 로딩 상태 → UI 반영
{isLoading && <TypingIndicator />}
<QuickReplies disabled={isLoading} />
<ChatInput isLoading={isLoading} />
```

## 📊 Before vs After

### Before
```
❌ 버튼이 너무 커서 화면 차지
❌ 로딩 상태 피드백 없음
❌ 메시지 많아지면 가려짐
❌ 수동으로 스크롤 필요
```

### After
```
✅ 적절한 버튼 크기
✅ 타이핑 인디케이터로 로딩 표시
✅ 자동 스크롤로 항상 최신 메시지 보임
✅ 키보드와 겹치지 않음
```

## 🎯 동작 흐름

```
1. 사용자 메시지 전송
   ↓
2. 메시지 목록에 추가 (즉시)
   ↓
3. 자동 스크롤 (100ms 후)
   ↓
4. 로딩 시작 (isPending = true)
   ↓
5. TypingIndicator 표시
   ↓
6. 모든 버튼 비활성화
   ↓
7. API 응답 대기...
   ↓
8. 응답 도착
   ↓
9. 메시지 목록에 추가
   ↓
10. 자동 스크롤
    ↓
11. 로딩 종료 (isPending = false)
    ↓
12. 버튼 활성화
```

## 📱 화면 레이아웃

```
┌─────────────────────────┐
│ 헤더 (주차 도우미)       │
├─────────────────────────┤
│                         │
│ 메시지 리스트           │ ← 자동 스크롤
│ ...                     │
│ 사용자: 메시지          │
│ 봇: 응답                │
│ [타이핑...]  ← 로딩 시   │
│                         │
├─────────────────────────┤
│ [목적지 설정]  ← 초기만  │
│ [현재 위치]    ← 초기만  │
├─────────────────────────┤
│ [버튼1] [버튼2] ← 작게  │
├─────────────────────────┤
│ [메시지 입력창] [전송]  │
└─────────────────────────┘
```

## 🧪 테스트 시나리오

1. **로딩 애니메이션**
   - 메시지 전송
   - 타이핑 인디케이터 확인
   - 점 3개 애니메이션 확인

2. **자동 스크롤**
   - 여러 메시지 연속 전송
   - 항상 최신 메시지가 보이는지 확인

3. **버튼 비활성화**
   - 로딩 중 버튼 클릭 시도
   - 클릭 안 됨 확인

4. **키보드 대응**
   - 입력창 포커스
   - 키보드가 입력창 가리지 않는지 확인

## 🎨 스타일 가이드

### 버튼 크기
- **QuickReplies**: `py-2.5`, `text-sm` (작고 컴팩트)
- **액션 버튼**: `py-3.5`, `text-base` (중간 크기)
- **입력창 버튼**: `w-14 h-14` (고정 크기)

### 색상
- **로딩 점**: `bg-gray-400`
- **타이핑 버블**: `bg-gray-100`
- **활성 버튼**: `border-blue-200`, `text-blue-600`
- **비활성 버튼**: `border-gray-200`, `text-gray-400`

### 애니메이션
- **점 이동**: -8px (위아래)
- **지속 시간**: 400ms
- **순차 실행**: dot1 → dot2 → dot3
